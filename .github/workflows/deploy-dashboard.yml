name: Deploy React Dashboard

on:
  push:
    branches:
      - main
    paths:
      - "dashboard/**"

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v3

      - name: Install Vercel CLI
        run: npm install -g vercel

      - name: Deploy to Vercel
        run: vercel --prod --token ${{ secrets.VERCEL_TOKEN }}
        env:
          VITE_AUTH0_DOMAIN: ${{ secrets.AUTH0_DOMAIN }}
          VITE_AUTH0_CLIENT_ID: ${{ secrets.AUTH0_CLIENT_ID }}
          VITE_AUTH0_AUDIENCE: ${{ secrets.AUTH0_API_AUDIENCE }}
          VITE_API_URL: https://aigovernancebackend.vercel.app
          VITE_AUTH0_REDIRECT_URI: https://aigovernanceportal.vercel.app
          VITE_HMR_HOST: aigovernanceportal.vercel.app
          VITE_HMR_CLIENT_PORT: 443

